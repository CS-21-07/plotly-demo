{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/benajasandrain/GitHub/plotly-demo/src/classes/SelectedPoint/index.tsx\";\nimport React from \"react\";\n// import Plot from \"react-plotly.js\";\nimport * as companies from \"../../data/urlMatcher.json\";\nimport \"react-datepicker/dist/react-datepicker.css\"; // npm install react-datepicker --save\n\nclass SelectedPoint extends React.Component {\n  constructor(props) {\n    super(props);\n    this.company = void 0;\n    this.dates = void 0;\n    this.companyList = void 0;\n    this.dailyValues = [];\n    this.cleanDate = void 0;\n    this.plotGraphData = [];\n    this.dataGraph = [];\n    this.stockEvents = [];\n    this.state = {\n      loaded: false\n    };\n\n    this.populateGraphValue = (dailyValuesList, graphTitle) => {\n      dailyValuesList.forEach(daily => {\n        let tempObj = {\n          name: graphTitle,\n          daily: daily\n        };\n        console.log(tempObj);\n        this.dataGraph.push(tempObj);\n        console.log(\"Number of data in my list \" + this.dataGraph.length);\n      }); // dates = [];\n      // if (this.dataGraph.length === this.companyList.length) {\n      //   this.setState({ loaded: true });\n      // }\n    };\n\n    this.displayStock = dailyObj => {\n      console.log(dailyObj);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: dailyObj.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Date: \", dailyObj.daily.date]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Volume: \", dailyObj.daily.volume]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Open: \", dailyObj.daily.open]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Close: \", dailyObj.daily.close]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"High: \", dailyObj.daily.high]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: [\"Low: \", dailyObj.daily.low]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }, this);\n    };\n\n    this.DisplayAll = () => {\n      return this.dataGraph.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", this.displayStock(item)]\n        }, item, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 14\n        }, this);\n      });\n    };\n\n    this.company = this.props.match.params.company;\n    this.companyList = this.company.split(\"+\").filter(elm => elm !== \"\");\n    this.dates = this.props.match.params.dates;\n    console.log(this.company);\n    console.log(this.dates);\n  } // setting to props parameters\n\n\n  async componentDidMount() {\n    async function myFetch(toFetch) {\n      const response = await fetch(toFetch); //   return Promise.resolve(response);\n\n      return response;\n    }\n\n    let myFetches = [];\n    let companiesFetched = [];\n    this.companyList.forEach(id => {\n      if (id !== \"\") {\n        var _companies$companies$, _companies$companies$2;\n\n        const fetching = (_companies$companies$ = companies.companies.find(comp => comp.id === id)) === null || _companies$companies$ === void 0 ? void 0 : _companies$companies$.JsonUrl;\n        console.log(\"we are fetching: \" + fetching);\n        const companyName = (_companies$companies$2 = companies.companies.find(comp => comp.id === id)) === null || _companies$companies$2 === void 0 ? void 0 : _companies$companies$2.name;\n        console.log(\"Company we are fetching: \" + companyName);\n        companiesFetched.push(String(companyName));\n        console.log(\"fetching: \" + fetching);\n        myFetches.push(myFetch(String(fetching)));\n      }\n    });\n    companiesFetched.reverse();\n    Promise.all(myFetches).then(files => {\n      files.forEach(async file => {\n        var _this$stockEvents;\n\n        let data = await file.json();\n        this.stockEvents = data;\n        console.log((_this$stockEvents = this.stockEvents) === null || _this$stockEvents === void 0 ? void 0 : _this$stockEvents.length);\n        console.log(this.stockEvents);\n        this.stockEvents.forEach(stocky => {\n          let tempString = JSON.stringify(stocky); //extract(stockEvents[i]);\n\n          let obj = JSON.parse(tempString);\n\n          if (obj.Date === this.dates) {\n            let dailyExchangeObj = {\n              date: obj.Date,\n              high: obj.High,\n              low: obj.Low,\n              open: obj.Open,\n              volume: obj.Volume,\n              close: obj.Close\n            };\n            this.dailyValues.push(dailyExchangeObj);\n          }\n        });\n        this.populateGraphValue(this.dailyValues, String(companiesFetched.pop()));\n      });\n      console.log(this.dataGraph.length);\n    }).catch(err => {\n      console.log(\"There was an error in fetching\", err);\n    });\n    this.setState({\n      loaded: true\n    });\n  }\n\n  render() {\n    return this.state.loaded ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        alignItems: \"center\",\n        margin: \"12px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"These are the selected values\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: this.DisplayAll()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"n/a\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SelectedPoint;","map":{"version":3,"sources":["/Users/benajasandrain/GitHub/plotly-demo/src/classes/SelectedPoint/index.tsx"],"names":["React","companies","SelectedPoint","Component","constructor","props","company","dates","companyList","dailyValues","cleanDate","plotGraphData","dataGraph","stockEvents","state","loaded","populateGraphValue","dailyValuesList","graphTitle","forEach","daily","tempObj","name","console","log","push","length","displayStock","dailyObj","date","volume","open","close","high","low","DisplayAll","map","item","match","params","split","filter","elm","componentDidMount","myFetch","toFetch","response","fetch","myFetches","companiesFetched","id","fetching","find","comp","JsonUrl","companyName","String","reverse","Promise","all","then","files","file","data","json","stocky","tempString","JSON","stringify","obj","parse","Date","dailyExchangeObj","High","Low","Open","Volume","Close","pop","catch","err","setState","render","alignItems","margin"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\n// import Plot from \"react-plotly.js\";\nimport * as companies from \"../../data/urlMatcher.json\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n// npm install react-datepicker --save\nimport { Container, Row, Col } from \"react-bootstrap\";\nimport { ComponentProps } from \"react\";\n//npm install react-bootstrap bootstrap\n\nexport interface SelectedPointProps\n  extends RouteComponentProps<{ company: string; dates: string }> {\n  // Other props that belong to component it self not Router\n}\n\ntype DailyExchange = {\n  date: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  adjClose?: number;\n  volume: number;\n};\n\ntype DailyDisplay = {\n  name: string;\n  daily: DailyExchange;\n};\n\nclass SelectedPoint extends React.Component<SelectedPointProps> {\n  private company: string;\n  private dates: string;\n\n  companyList: string[];\n\n  dailyValues: DailyExchange[] = [];\n  cleanDate: string;\n  plotGraphData: any[] = [];\n  dataGraph: any[] = [];\n  stockEvents: any[] = [];\n\n  state = {\n    loaded: false,\n  };\n\n  constructor(props: SelectedPointProps) {\n    super(props);\n    this.company = this.props.match.params.company;\n    this.companyList = this.company.split(\"+\").filter((elm) => elm !== \"\");\n    this.dates = this.props.match.params.dates;\n    console.log(this.company);\n    console.log(this.dates);\n  }\n  // setting to props parameters\n\n  async componentDidMount() {\n    async function myFetch(toFetch: string) {\n      const response = await fetch(toFetch);\n      //   return Promise.resolve(response);\n      return response;\n    }\n\n    let myFetches: any[] = [];\n    let companiesFetched: string[] = [];\n\n    this.companyList.forEach((id) => {\n      if (id !== \"\") {\n        const fetching = companies.companies.find((comp) => comp.id === id)\n          ?.JsonUrl;\n        console.log(\"we are fetching: \" + fetching);\n\n        const companyName = companies.companies.find((comp) => comp.id === id)\n          ?.name;\n        console.log(\"Company we are fetching: \" + companyName);\n        companiesFetched.push(String(companyName));\n        console.log(\"fetching: \" + fetching);\n        myFetches.push(myFetch(String(fetching)));\n      }\n    });\n\n    companiesFetched.reverse();\n    Promise.all(myFetches)\n      .then((files) => {\n        files.forEach(async (file) => {\n          let data = await file.json();\n          this.stockEvents = data;\n          console.log(this.stockEvents?.length);\n          console.log(this.stockEvents);\n          this.stockEvents.forEach((stocky) => {\n            let tempString: string = JSON.stringify(stocky); //extract(stockEvents[i]);\n            let obj = JSON.parse(tempString);\n            if (obj.Date === this.dates) {\n              let dailyExchangeObj: DailyExchange = {\n                date: obj.Date,\n                high: obj.High,\n                low: obj.Low,\n                open: obj.Open,\n                volume: obj.Volume,\n                close: obj.Close,\n              };\n              this.dailyValues.push(dailyExchangeObj);\n            }\n          });\n          this.populateGraphValue(\n            this.dailyValues,\n            String(companiesFetched.pop())\n          );\n        });\n        console.log(this.dataGraph.length);\n      })\n      .catch((err) => {\n        console.log(\"There was an error in fetching\", err);\n      });\n    this.setState({ loaded: true });\n  }\n\n  populateGraphValue = (dailyValuesList: any[], graphTitle: string) => {\n    dailyValuesList.forEach((daily) => {\n      let tempObj: DailyDisplay = {\n        name: graphTitle,\n        daily: daily,\n      };\n\n      console.log(tempObj);\n      this.dataGraph.push(tempObj);\n      console.log(\"Number of data in my list \" + this.dataGraph.length);\n    });\n    // dates = [];\n    // if (this.dataGraph.length === this.companyList.length) {\n    //   this.setState({ loaded: true });\n    // }\n  };\n\n  displayStock = (dailyObj) => {\n    console.log(dailyObj);\n    return (\n      <div>\n        <h3>{dailyObj.name}</h3>\n        <ul>\n          <li>Date: {dailyObj.daily.date}</li>\n          <li>Volume: {dailyObj.daily.volume}</li>\n          <li>Open: {dailyObj.daily.open}</li>\n          <li>Close: {dailyObj.daily.close}</li>\n          <li>High: {dailyObj.daily.high}</li>\n          <li>Low: {dailyObj.daily.low}</li>\n        </ul>\n      </div>\n    );\n  };\n\n  DisplayAll = () => {\n    return this.dataGraph.map((item) => {\n      return <div key={item}> {this.displayStock(item)}</div>;\n    });\n  };\n\n  public render() {\n    return this.state.loaded ? (\n      <div style={{ alignItems: \"center\", margin: \"12px\" }}>\n        <div>These are the selected values</div>\n        <div>{this.DisplayAll()}</div>\n      </div>\n    ) : (\n      <div>\n        <h2>n/a</h2>\n      </div>\n    );\n  }\n}\n\nexport default SelectedPoint;\n"]},"metadata":{},"sourceType":"module"}