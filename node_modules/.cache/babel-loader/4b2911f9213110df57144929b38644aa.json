{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/benajasandrain/GitHub/plotly-demo/src/classes/SingleGragh/index.tsx\";\nimport React from \"react\";\n// import Plot from \"react-plotly.js\";\nimport * as companies from \"../../data/urlMatcher.json\";\nimport { Link } from \"react-router-dom\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\"; // npm install react-datepicker --save\n\nimport { Container, Row, Col } from \"react-bootstrap\"; //npm install react-bootstrap bootstrap\n\nimport Plotly from \"plotly.js\";\nimport createPlotlyComponent from \"react-plotly.js/factory\";\nconst Plot = createPlotlyComponent(Plotly);\n_c = Plot;\n\nclass SingleGraph extends React.Component {\n  //   const defaultStartDate: Date = new Date(2000, 0, 0);\n  //   const defaultEndDate: Date = new Date();\n  constructor(props) {\n    var _companies$companies$, _companies$companies$2;\n\n    super(props);\n    this.company = void 0;\n    this.option = void 0;\n    this.dailyValues = [];\n    this.dailyValuesOrdinate = [];\n    this.dates = [];\n    this.fetchUrl = void 0;\n    this.trigger = true;\n    this.extension = \"\";\n    this.value = \"Close\";\n    this.xx = [];\n    this.yy = [];\n    this.isVolume = void 0;\n    this.startDate = new Date(2000, 0, 0);\n    this.endDate = new Date();\n    this.GraphTitle = void 0;\n\n    this.populateGraphValue = () => {\n      for (let i = 0; i < this.dailyValues.length; i++) {\n        const tempDate = this.toDateObject(this.dailyValues[i].date);\n\n        if (tempDate >= this.startDate && tempDate <= this.endDate) {\n          this.manageOption(this.dailyValues[i]);\n          this.dates.push(tempDate);\n        }\n      }\n\n      this.xx = this.dates;\n      this.yy = this.dailyValuesOrdinate;\n    };\n\n    this.manageOption = obj => {\n      switch (this.option) {\n        case \"close\":\n          this.dailyValuesOrdinate.push(obj.close);\n          break;\n\n        case \"high\":\n          this.dailyValuesOrdinate.push(obj.high);\n          break;\n\n        case \"low\":\n          this.dailyValuesOrdinate.push(obj.low);\n          break;\n\n        case \"volume\":\n          this.dailyValuesOrdinate.push(obj.volume);\n          this.isVolume = true;\n          break;\n\n        case \"open\":\n          this.dailyValuesOrdinate.push(obj.open);\n          break;\n\n        default:\n          this.dailyValuesOrdinate.push(obj.close);\n          break;\n      }\n    };\n\n    this.toDateObject = dateString => {\n      const temp = dateString.split(\"-\");\n      const date = new Date();\n      date.setFullYear(parseInt(temp[0]), parseInt(temp[1]), parseInt(temp[2]));\n      return date;\n    };\n\n    this.handleChange = event => {\n      const linkvalue = event.target.value;\n      this.value = linkvalue;\n      this.extension = \"/visual/\" + this.company + \"/\" + linkvalue.toLowerCase();\n      console.log(this.extension);\n    };\n\n    this.onFetchData = async toFetch => {\n      const response = await fetch(toFetch).then(function (response) {\n        console.log(\"Successful fetch at \" + toFetch);\n        return response.json();\n      }).catch(err => {\n        console.log(\"There was an error in fetching\", err);\n      });\n      return Promise.resolve(response);\n    };\n\n    this.main = url => {\n      this.onFetchData(url).then(response => {\n        const stockEvents = response;\n        console.log(stockEvents === null || stockEvents === void 0 ? void 0 : stockEvents.length);\n        console.log(stockEvents);\n\n        for (let i = 0; i < (stockEvents === null || stockEvents === void 0 ? void 0 : stockEvents.length); i++) {\n          let tempString = JSON.stringify(stockEvents[i]); //extract(stockEvents[i]);\n\n          let obj = JSON.parse(tempString);\n          let dailyExchangeObj = {\n            date: obj.Date,\n            high: obj.High,\n            low: obj.Low,\n            open: obj.Open,\n            volume: obj.Volume,\n            close: obj.Close\n          };\n          this.dailyValues.push(dailyExchangeObj);\n        }\n\n        this.populateGraphValue();\n      });\n      this.value = this.option;\n    };\n\n    this.company = this.props.match.params.company;\n    this.option = this.props.match.params.option;\n    this.isVolume = this.value === \"Volume\";\n    const fetching = (_companies$companies$ = companies.companies.find(comp => comp.company === this.company)) === null || _companies$companies$ === void 0 ? void 0 : _companies$companies$.JsonUrl;\n    console.log(\"we are fetching: \" + fetching);\n    const companyName = (_companies$companies$2 = companies.companies.find(comp => comp.company === this.company)) === null || _companies$companies$2 === void 0 ? void 0 : _companies$companies$2.name;\n    this.GraphTitle = (companyName === null || companyName === void 0 ? void 0 : companyName.toUpperCase()) + \" - Stock Market: (\" + this.option + \")\";\n    this.main(String(fetching));\n  }\n\n  render() {\n    // const { this.props , {},  } = this.state\n    // const isLoading = this.props.isLoading\n    // const bugs = this.bugStore.bugs\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        alignItems: \"center\",\n        margin: \"12px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          paddingBottom: \"15px\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/home\",\n          type: \"button\",\n          children: \"Go to Home\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Pick the chart to display:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            value: this.value,\n            onChange: this.handleChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Close\",\n              children: \"Select from Menu\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Open\",\n              children: \"Open\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Volume\",\n              children: \"Volume\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Close\",\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"High\",\n              children: \"High\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Low\",\n              children: \"Low\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: this.extension,\n          style: {\n            paddingLeft: \"8px\"\n          },\n          children: [\"Visualize\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [!this.isVolume ? /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            // x: [1, 2, 3, 7],\n            // y: [2, 6, 3, 9],\n            x: this.xx,\n            y: this.yy,\n            type: \"scatter\",\n            // mode: \"lines+markers\",\n            mode: \"lines\",\n            marker: {\n              color: \"red\"\n            },\n            name: \"Data\"\n          }] //onClick={window.alert(\"I clicked on a dot\")}\n          ,\n          legend: {\n            orientation: \"h\",\n            yanchor: \"right\"\n          },\n          layout: {\n            showlegend: true,\n            width: 1000,\n            height: 600,\n            title: {\n              text: this.GraphTitle,\n              font: {\n                size: 24\n              }\n            },\n            grid: {\n              yside: \"right plot\"\n            },\n            xaxis: {\n              visible: true,\n              color: \"#2c3e50\",\n              title: {\n                text: \"Dates\"\n              }\n            },\n            yaxis: {\n              visible: true,\n              color: \"#2c3e50\",\n              title: {\n                text: \"Values\"\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), this.isVolume ? /*#__PURE__*/_jsxDEV(Plot, {\n          data: [{\n            x: this.xx,\n            y: this.yy,\n            type: \"bar\",\n            mode: \"lines\",\n            marker: {\n              color: \"red\"\n            }\n          }],\n          layout: {\n            width: 1000,\n            height: 600,\n            title: this.GraphTitle\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        fluid: \"md\",\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \" change start Date \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                  selected: this.startDate,\n                  onChange: date => this.startDate = date,\n                  showTimeSelect: true,\n                  dateFormat: \"Pp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: \" change End Date \"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(DatePicker, {\n                  selected: this.endDate,\n                  onChange: date => this.endDate = date,\n                  showTimeSelect: true,\n                  dateFormat: \"Pp\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SingleGraph;\n\nvar _c;\n\n$RefreshReg$(_c, \"Plot\");","map":{"version":3,"sources":["/Users/benajasandrain/GitHub/plotly-demo/src/classes/SingleGragh/index.tsx"],"names":["React","companies","Link","DatePicker","Container","Row","Col","Plotly","createPlotlyComponent","Plot","SingleGraph","Component","constructor","props","company","option","dailyValues","dailyValuesOrdinate","dates","fetchUrl","trigger","extension","value","xx","yy","isVolume","startDate","Date","endDate","GraphTitle","populateGraphValue","i","length","tempDate","toDateObject","date","manageOption","push","obj","close","high","low","volume","open","dateString","temp","split","setFullYear","parseInt","handleChange","event","linkvalue","target","toLowerCase","console","log","onFetchData","toFetch","response","fetch","then","json","catch","err","Promise","resolve","main","url","stockEvents","tempString","JSON","stringify","parse","dailyExchangeObj","High","Low","Open","Volume","Close","match","params","fetching","find","comp","JsonUrl","companyName","name","toUpperCase","String","render","alignItems","margin","paddingBottom","paddingLeft","x","y","type","mode","marker","color","orientation","yanchor","showlegend","width","height","title","text","font","size","grid","yside","xaxis","visible","yaxis"],"mappings":"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","sourcesContent":["import React, { Component, useState, useEffect } from \"react\";\nimport { RouteComponentProps } from \"react-router-dom\";\n// import Plot from \"react-plotly.js\";\nimport * as companies from \"../../data/urlMatcher.json\";\nimport { Link } from \"react-router-dom\";\nimport Select from \"react-dropdown-select\";\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n// npm install react-datepicker --save\nimport { Container, Row, Col } from \"react-bootstrap\";\n//npm install react-bootstrap bootstrap\n\nimport Plotly from \"plotly.js\";\nimport createPlotlyComponent from \"react-plotly.js/factory\";\nconst Plot = createPlotlyComponent(Plotly);\n\nexport interface SingleGraphProps\n  extends RouteComponentProps<{ company: string; option: string }> {\n  // Other props that belong to component it self not Router\n}\n\ntype DailyExchange = {\n  date: string;\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  adjClose?: number;\n  volume: number;\n};\n\nclass SingleGraph extends React.Component<SingleGraphProps> {\n  private company: string;\n  private option: string;\n\n  dailyValues: DailyExchange[] = [];\n  dailyValuesOrdinate: number[] = [];\n  dates: Date[] = [];\n  //   const defaultStartDate: Date = new Date(2000, 0, 0);\n  //   const defaultEndDate: Date = new Date();\n\n  fetchUrl: any;\n  trigger: boolean = true;\n  extension: string = \"\";\n  value: string = \"Close\";\n  xx: Date[] = [];\n  yy: number[] = [];\n  isVolume: boolean;\n  startDate: Date = new Date(2000, 0, 0);\n  endDate: Date = new Date();\n  GraphTitle: string;\n\n  constructor(props: SingleGraphProps) {\n    super(props);\n    this.company = this.props.match.params.company;\n    this.option = this.props.match.params.option;\n    this.isVolume = this.value === \"Volume\";\n    const fetching = companies.companies.find(\n      (comp) => comp.company === this.company\n    )?.JsonUrl;\n    console.log(\"we are fetching: \" + fetching);\n\n    const companyName = companies.companies.find(\n      (comp) => comp.company === this.company\n    )?.name;\n\n    this.GraphTitle =\n      companyName?.toUpperCase() + \" - Stock Market: (\" + this.option + \")\";\n\n    this.main(String(fetching));\n  }\n\n  private populateGraphValue = (): void => {\n    for (let i = 0; i < this.dailyValues.length; i++) {\n      const tempDate = this.toDateObject(this.dailyValues[i].date);\n      if (tempDate >= this.startDate && tempDate <= this.endDate) {\n        this.manageOption(this.dailyValues[i]);\n        this.dates.push(tempDate);\n      }\n    }\n    this.xx = this.dates;\n    this.yy = this.dailyValuesOrdinate;\n  };\n\n  private manageOption = (obj: DailyExchange): void => {\n    switch (this.option) {\n      case \"close\":\n        this.dailyValuesOrdinate.push(obj.close);\n        break;\n      case \"high\":\n        this.dailyValuesOrdinate.push(obj.high);\n        break;\n      case \"low\":\n        this.dailyValuesOrdinate.push(obj.low);\n        break;\n      case \"volume\":\n        this.dailyValuesOrdinate.push(obj.volume);\n        this.isVolume = true;\n        break;\n      case \"open\":\n        this.dailyValuesOrdinate.push(obj.open);\n        break;\n      default:\n        this.dailyValuesOrdinate.push(obj.close);\n        break;\n    }\n  };\n\n  private toDateObject = (dateString: string): Date => {\n    const temp: string[] = dateString.split(\"-\");\n    const date: Date = new Date();\n    date.setFullYear(parseInt(temp[0]), parseInt(temp[1]), parseInt(temp[2]));\n    return date;\n  };\n\n  private handleChange = (event) => {\n    const linkvalue: string = event.target.value;\n    this.value = linkvalue;\n    this.extension = \"/visual/\" + this.company + \"/\" + linkvalue.toLowerCase();\n    console.log(this.extension);\n  };\n\n  private onFetchData = async (toFetch: string) => {\n    const response = await fetch(toFetch)\n      .then(function (response: any) {\n        console.log(\"Successful fetch at \" + toFetch);\n        return response.json();\n      })\n      .catch((err) => {\n        console.log(\"There was an error in fetching\", err);\n      });\n    return Promise.resolve(response);\n  };\n\n  private main = (url: string) => {\n    this.onFetchData(url).then((response) => {\n      const stockEvents: any[] = response;\n      console.log(stockEvents?.length);\n      console.log(stockEvents);\n      for (let i: number = 0; i < stockEvents?.length; i++) {\n        let tempString: string = JSON.stringify(stockEvents[i]); //extract(stockEvents[i]);\n        let obj = JSON.parse(tempString);\n        let dailyExchangeObj: DailyExchange = {\n          date: obj.Date,\n          high: obj.High,\n          low: obj.Low,\n          open: obj.Open,\n          volume: obj.Volume,\n          close: obj.Close,\n        };\n        this.dailyValues.push(dailyExchangeObj);\n      }\n      this.populateGraphValue();\n    });\n    this.value = this.option;\n  };\n\n  public render() {\n    // const { this.props , {},  } = this.state\n    // const isLoading = this.props.isLoading\n    // const bugs = this.bugStore.bugs\n\n    return (\n      <div style={{ alignItems: \"center\", margin: \"12px\" }}>\n        <div style={{ paddingBottom: \"15px\" }}>\n          <Link to={\"/home\"} type=\"button\">\n            Go to Home\n          </Link>\n        </div>\n        <div>\n          <label>\n            Pick the chart to display:\n            <select value={this.value} onChange={this.handleChange}>\n              <option value=\"Close\">Select from Menu</option>\n              <option value=\"Open\">Open</option>\n              <option value=\"Volume\">Volume</option>\n              <option value=\"Close\">Close</option>\n              <option value=\"High\">High</option>\n              <option value=\"Low\">Low</option>\n            </select>\n          </label>\n          <a href={this.extension} style={{ paddingLeft: \"8px\" }}>\n            Visualize{\" \"}\n          </a>\n        </div>\n        <div>\n          {!this.isVolume ? (\n            <Plot\n              data={[\n                {\n                  // x: [1, 2, 3, 7],\n                  // y: [2, 6, 3, 9],\n                  x: this.xx,\n                  y: this.yy,\n                  type: \"scatter\",\n                  // mode: \"lines+markers\",\n                  mode: \"lines\",\n                  marker: { color: \"red\" },\n                  name: \"Data\",\n                },\n              ]}\n              //onClick={window.alert(\"I clicked on a dot\")}\n              legend={{\n                orientation: \"h\",\n                yanchor: \"right\",\n              }}\n              layout={{\n                showlegend: true,\n                width: 1000,\n                height: 600,\n                title: {\n                  text: this.GraphTitle,\n                  font: {\n                    size: 24,\n                  },\n                },\n                grid: {\n                  yside: \"right plot\",\n                },\n                xaxis: {\n                  visible: true,\n                  color: \"#2c3e50\",\n                  title: {\n                    text: \"Dates\",\n                  },\n                },\n                yaxis: {\n                  visible: true,\n                  color: \"#2c3e50\",\n                  title: {\n                    text: \"Values\",\n                  },\n                },\n              }}\n            />\n          ) : (\n            <div></div>\n          )}\n          {this.isVolume ? (\n            <Plot\n              data={[\n                {\n                  x: this.xx,\n                  y: this.yy,\n                  type: \"bar\",\n                  mode: \"lines\",\n                  marker: { color: \"red\" },\n                },\n              ]}\n              layout={{\n                width: 1000,\n                height: 600,\n                title: this.GraphTitle,\n              }}\n            />\n          ) : (\n            <div></div>\n          )}\n        </div>\n        <Container fluid=\"md\">\n          <Row>\n            <div>\n              <Col>\n                <div>\n                  <h3> change start Date </h3>\n                  <DatePicker\n                    selected={this.startDate}\n                    onChange={(date) => (this.startDate = date)}\n                    showTimeSelect\n                    dateFormat=\"Pp\"\n                  />\n                </div>\n              </Col>\n              <Col>\n                <div>\n                  <h3> change End Date </h3>\n                  <DatePicker\n                    selected={this.endDate}\n                    onChange={(date) => (this.endDate = date)}\n                    showTimeSelect\n                    dateFormat=\"Pp\"\n                  />\n                </div>\n              </Col>\n            </div>\n          </Row>\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default SingleGraph;\n"]},"metadata":{},"sourceType":"module"}